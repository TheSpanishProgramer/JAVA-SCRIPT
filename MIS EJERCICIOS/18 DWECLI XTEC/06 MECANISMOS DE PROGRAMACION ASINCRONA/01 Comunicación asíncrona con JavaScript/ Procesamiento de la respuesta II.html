<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Procesamiento de la respuesta II</title>
    <style></style>
  </head>
  <body>
    <html>
      <head>
        <meta charset="utf-8" />
      </head>
      <body></body>
    </html>
  </body>

  <script>
    if (window.XMLHttpRequest) {
      // Mozilla, Safari, IE7+
      httpRequest = new XMLHttpRequest();
      console.log('Creado el Objeto a partir de XMLHttpRequest.');
    } else if (window.ActiveXObject) {
      // IE 6 y anteriores
      httpRequest = new ActiveXObject('Microsoft.XMLHTTP');
      console.log('Creado el Objeto a partir de ActiveXObject.');
    } else {
      console.error('Error: Este navegador no soporta AJAX.');
    }

    httpRequest.onreadystatechange = processarCanviEstat;

    httpRequest.open(
      'GET',
      'https://api.idescat.cat/emex/v1/dades.xml?id=080018&i=f171',
      true
    );
    httpRequest.send(null);

    function processarCanviEstat() {
      if (httpRequest.readyState === XMLHttpRequest.DONE) {
        console.log(
          'Se ha recibido la respuesta. Estado actual:',
          httpRequest.readyState
        );

        if (httpRequest.status === 200) {
          console.log(
            'Se ha recibido la respuesta correctamente. Estado de respuesta:',
            httpRequest.status
          );
        } else {
          console.log(
            'Se ha Producido un error al obteniendo la respuesta. Estado de respuesta:',
            httpRequest.status
          );
        }
      } else {
        console.log(
          'Todav√≠a no se ha recibido la respuesta ... Estado actual:',
          httpRequest.readyState
        );
      }
    }
  </script>
</html>
