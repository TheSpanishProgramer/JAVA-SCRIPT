<!-- Realice una web sencilla en la que haya al menos 1 campo que debe de 
validar una determinada condición. La lógica del programa debe de implementar:  
cada vez que el usuario trate de enviar el formulario y haya algún error, una 
variable contador (almacenada en una cookie o webstorage) se incrementará y 
se mostrará.
El resultado del número de intentos se reflejará en un campo de texto que se 
encontrará al final del formulario.
Si el usuario sale de la web y vuelve a entrar, el campo de texto mostrará 
el número almacenado de reintentos en las sesiones anteriores.
Junto al campo de texto habrá un botón que, al pulsarlo, permitirá reiniciar 
el valor de la cookie/webStorage a 0  (reiniciar el numero de reintentos).
Seleccione qué tecnología va a usar: 
¿cookies o webstorage?
 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <div class="smell-container">
        <h1>Probando sistemas de almacenamiento</h1>

        <form>
            <input id="item" type="text" placeholder="New">
            <button id="enviar">enviar</button>
        </form>

        <h2>Número de intentos:</h2>
        <label id=numeroReintentos></label>

        <button>Limpiar número de reintentos</button>
    </div>


    <script>
        window.onload = iniciar;
        let numReintentos = 0;
        const CLAVE = "NREINTENTOS";

        function iniciar(){
            let enviarBtn = document.getElementById("enviar");
            enviarBtn.addEventListener("click", enviar);
            //numReintentos = window.localStorage.getItem(CLAVE);

            let limpiarBtn = document.getElementById("limpiar").addEventListener("click", function() {
                reiniciarNumReintentos();
                document.getElementById("numeroReintentos").textContent = 0;
            });
        }

        function enviar(){
            if(document.getElementById("item").value == ""){
                alert("Campo vacio");
                actualizarNumReintentos();
                document.getElementById("enviar").textContent = window.localStorage.getItem(CLAVE);
            }
        }

        function actualizarNumReintentos(){
            let temp = window.localStorage.getItem(CLAVE);
            if(temp == "")
                temp = 0;
                temp= +temp+1;
            window.localStorage.setItem(CLAVE, temp);
        }

        function reiniciarNumReintentos(){
            window.localStorage.getItem(CLAVE, "");
        }
    </script>
</body>
</html> 