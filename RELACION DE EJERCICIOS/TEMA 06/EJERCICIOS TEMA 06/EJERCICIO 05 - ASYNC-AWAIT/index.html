<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>
	<script>
		//Solucion
		async function loadJson(url) { // loadJson se vuelve una funcion asyncrona
			let response = await fetch(url); // Lo que estaba dentro de .then se reemplaza por await

			if (response.status == 200) {
				let json = await response.json(); // Podemos devolver return response.json() en lugar de esperar por Ã©l
				return json;
			}

			throw new Error(response.status);
		}

		loadJson('no-such-user.json')
			.catch(alert); // Error: 404 El error arrojado por loadJson es manejado por .catch
	</script>
</body>

</html>