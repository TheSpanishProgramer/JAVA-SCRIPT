<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Creación de Objetos/ patrones funcionales (clausuras III)</title>
    <style></style>
    <script>
      var crearArmaAmbMunicion = function (_nombre, _potencia, _maxMunicion) {
        var _municion = _maxMunicion;

        var _restaMunicion = function () {
          return _municion > 0;
        };

        return {
          recargar: function () {
            console.log(_nombre + ' Se ha recargado');
            _municion = _maxMunicion;
          },

          atacar: function (objetivo) {
            if (_restaMunicion()) {
              console.log(
                'Bang! Se ha causado ' +
                  _potencia +
                  ' puntos de daño a ' +
                  objetivo
              );
              _municion--;
            } else {
              console.log('Click! Sin munición');
            }
          },

          getMunicion: function () {
            return _municion;
          },

          getNombre: function () {
            return _nombre;
          },
        };
      };

      var pistola = crearArmaAmbMunicion('Pistola', 3, 2);
      // Pistola con potencia 3 y dos balas de Capacidad

      console.log('Nombre del arma : ' + pistola.getNombre());
      console.log('Munició restant: ' + pistola.getMunicion());
      pistola.atacar('Zombi');
      pistola.atacar('Zombi');
      pistola.atacar('Zombi');
      console.log('Munició restant: ' + pistola.getMunicion());
      pistola.recargar();
      console.log('Municion restante: ' + pistola.getMunicion());
      pistola.atacar('Zombi');
    </script>
  </head>
  <body></body>
</html>
